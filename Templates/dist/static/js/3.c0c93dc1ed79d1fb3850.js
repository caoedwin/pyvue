webpackJsonp([3],{"6EY+":function(o,t){},"eRj+":function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("qpxo"),e("vw/H"),e("XEfP"),e("BQbq");var n=e("vLgD"),r={data:function(){return{forgotForm:{phone:"",code:""},loading:!1,codeButtonText:"获取验证码",codeButtonDisabled:!1,countdown:60}},methods:{sendVerificationCode:function(){var o=this;this.forgotForm.phone&&/^1[3-9]\d{9}$/.test(this.forgotForm.phone)?(this.codeButtonDisabled=!0,n.a.post("/api/send_verification_code/",{phone:this.forgotForm.phone,type:"reset_password"}).then(function(){o.startCountdown(),o.$message.success("验证码已发送")}).catch(function(t){console.error("发送验证码失败:",t),o.$message.error("发送验证码失败"),o.codeButtonDisabled=!1})):this.$message.error("请输入有效的手机号码")},startCountdown:function(){var o=this,t=setInterval(function(){o.codeButtonText="".concat(o.countdown,"秒后重新获取"),o.countdown--,o.countdown<0&&(clearInterval(t),o.codeButtonText="获取验证码",o.codeButtonDisabled=!1,o.countdown=60)},1e3)},verifyCode:function(){var o=this;this.forgotForm.phone&&this.forgotForm.code?(this.loading=!0,n.a.post("/api/verify_reset_code/",{phone:this.forgotForm.phone,code:this.forgotForm.code}).then(function(){o.$router.push({path:"/reset-password",query:{phone:o.forgotForm.phone,token:"临时令牌"}})}).catch(function(t){var e,n;console.error("验证失败:",t),o.$message.error((null===(e=t.response)||void 0===e?void 0:null===(n=e.data)||void 0===n?void 0:n.detail)||"验证失败")}).finally(function(){o.loading=!1})):this.$message.error("请填写完整信息")},goToLogin:function(){this.$router.push("/login")}}},i={render:function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"forgot-password-container"},[e("el-form",{ref:"form",staticClass:"forgot-form",attrs:{model:o.forgotForm}},[e("h2",[o._v("找回密码")]),o._v(" "),e("el-form-item",[e("el-input",{attrs:{"prefix-icon":"el-icon-mobile-phone",placeholder:"注册手机号码",maxlength:"11"},model:{value:o.forgotForm.phone,callback:function(t){o.$set(o.forgotForm,"phone",t)},expression:"forgotForm.phone"}})],1),o._v(" "),e("el-form-item",[e("div",{staticClass:"code-input"},[e("el-input",{staticStyle:{width:"60%"},attrs:{"prefix-icon":"el-icon-message",placeholder:"验证码"},model:{value:o.forgotForm.code,callback:function(t){o.$set(o.forgotForm,"code",t)},expression:"forgotForm.code"}}),o._v(" "),e("el-button",{staticStyle:{width:"35%","margin-left":"5%"},attrs:{type:"primary",disabled:o.codeButtonDisabled},on:{click:o.sendVerificationCode}},[o._v("\n          "+o._s(o.codeButtonText)+"\n        ")])],1)]),o._v(" "),e("el-form-item",[e("el-button",{staticClass:"verify-btn",attrs:{type:"primary",loading:o.loading},on:{click:o.verifyCode}},[o._v("验证并重置密码")])],1),o._v(" "),e("div",{staticClass:"login-link"},[e("el-link",{attrs:{type:"primary"},on:{click:o.goToLogin}},[o._v("返回登录")])],1)],1)],1)},staticRenderFns:[]};var s=e("VU/8")(r,i,!1,function(o){e("6EY+")},"data-v-754f278e",null);t.default=s.exports}});
//# sourceMappingURL=3.c0c93dc1ed79d1fb3850.js.map