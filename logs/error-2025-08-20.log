[2025-08-20 08:57:16,583] [log.py:228] [log:log_response] [ERROR]- Internal Server Error: /api/login/
Traceback (most recent call last):
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\exception.py", line 34, in inner
    response = get_response(request)
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\base.py", line 126, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\base.py", line 124, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Python372\mecheck\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Python372\mecheck\lib\site-packages\django\views\generic\base.py", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 476, in raise_uncaught_exception
    raise exc
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\djangoproject\pyvue\backend01\views.py", line 47, in post
    'user': serializer.data
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 562, in data
    ret = super().data
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 260, in data
    self._data = self.to_representation(self.instance)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 529, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\fields.py", line 1905, in to_representation
    return method(value)
  File "C:\djangoproject\pyvue\backend01\serializer.py", line 44, in get_menu_tree
    return MenuTreeSerializer(obj.get_menu_tree(), many=True).data
  File "C:\djangoproject\pyvue\backend01\models.py", line 174, in get_menu_tree
    all_menus = accessible_menus | parent_menus
  File "C:\Python372\mecheck\lib\site-packages\django\db\models\query.py", line 324, in __or__
    combined.query.combine(other.query, sql.OR)
  File "C:\Python372\mecheck\lib\site-packages\django\db\models\sql\query.py", line 540, in combine
    "Cannot combine a unique query with a non-unique query."
AssertionError: Cannot combine a unique query with a non-unique query.
[2025-08-20 08:57:16,609] [basehttp.py:154] [basehttp:log_message] [ERROR]- "POST /api/login/ HTTP/1.1" 500 20447
[2025-08-20 13:06:22,251] [log.py:228] [log:log_response] [ERROR]- Internal Server Error: /api/login/
Traceback (most recent call last):
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\exception.py", line 34, in inner
    response = get_response(request)
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\base.py", line 126, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\base.py", line 124, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Python372\mecheck\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Python372\mecheck\lib\site-packages\django\views\generic\base.py", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 476, in raise_uncaught_exception
    raise exc
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\djangoproject\pyvue\backend01\views.py", line 47, in post
    'user': serializer.data
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 562, in data
    ret = super().data
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 260, in data
    self._data = self.to_representation(self.instance)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 529, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\fields.py", line 1905, in to_representation
    return method(value)
  File "C:\djangoproject\pyvue\backend01\serializer.py", line 44, in get_menu_tree
    return MenuTreeSerializer(obj.get_menu_tree(), many=True).data
  File "C:\djangoproject\pyvue\backend01\models.py", line 210, in get_menu_tree
    print([build_tree(root.id) for root in root_menus])
NameError: name 'pri' is not defined
[2025-08-20 13:06:22,268] [basehttp.py:154] [basehttp:log_message] [ERROR]- "POST /api/login/ HTTP/1.1" 500 20081
[2025-08-20 13:06:29,246] [log.py:228] [log:log_response] [ERROR]- Internal Server Error: /api/login/
Traceback (most recent call last):
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\exception.py", line 34, in inner
    response = get_response(request)
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\base.py", line 126, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Python372\mecheck\lib\site-packages\django\core\handlers\base.py", line 124, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Python372\mecheck\lib\site-packages\django\views\decorators\csrf.py", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File "C:\Python372\mecheck\lib\site-packages\django\views\generic\base.py", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 505, in dispatch
    response = self.handle_exception(exc)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 465, in handle_exception
    self.raise_uncaught_exception(exc)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 476, in raise_uncaught_exception
    raise exc
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\views.py", line 502, in dispatch
    response = handler(request, *args, **kwargs)
  File "C:\djangoproject\pyvue\backend01\views.py", line 47, in post
    'user': serializer.data
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 562, in data
    ret = super().data
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 260, in data
    self._data = self.to_representation(self.instance)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\serializers.py", line 529, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
  File "C:\Python372\mecheck\lib\site-packages\rest_framework\fields.py", line 1905, in to_representation
    return method(value)
  File "C:\djangoproject\pyvue\backend01\serializer.py", line 44, in get_menu_tree
    return MenuTreeSerializer(obj.get_menu_tree(), many=True).data
  File "C:\djangoproject\pyvue\backend01\models.py", line 210, in get_menu_tree
    print([build_tree(root.id) for root in root_menus])
NameError: name 'pri' is not defined
[2025-08-20 13:06:29,252] [basehttp.py:154] [basehttp:log_message] [ERROR]- "POST /api/login/ HTTP/1.1" 500 20081
